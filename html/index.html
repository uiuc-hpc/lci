<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LCI: LCI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LCI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LCI </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2home_2jiakuny_2workspace_2lci2_2_r_e_a_d_m_e"></a></p>
<p>A Lightweight Communication Interface for Asynchronous Multithreaded Systems</p>
<p><img src="https://github.com/uiuc-hpc/lci/actions/workflows/ci.yml/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></p>
<h1>Overview</h1>
<p>The Lightweight Communication Interface (LCI) is designed to be an efficient communication library for asynchronous communications in multithreaded environments. It also serves as a research tool to explore design choices for such libraries. It has the following major features:</p><ul>
<li>a unified interface that supports flexible combinations of all common point-to-point communication primitives, including send-receive, active messages, and RMA put/get (with/without notification), and various built-in mechanisms to synchronize with pending communications, including synchronizers, completion queues, function handlers, and completion graphs.</li>
<li>a flexible interface offers both a simple starting point for users to program and a wide range of options for them to incrementally fine-tune the communication resources and runtime behaviors, minimizing potential interference between communication and computation.</li>
<li>a lightweight and efficient runtime optimized for threading efficiency and massive parallelism. The runtime is built with a deep understanding of low-level network activities and employs optimizations such as atomic-based data structures, thread-local storage, and fine-grained nonblocking locks.</li>
</ul>
<p>LCI is implemented as a C++ libraries with two major network backends: <a href="https://github.com/linux-rdma/rdma-core/blob/master/Documentation/libibverbs.md">libibverbs</a> for InfiniBand/RoCE and <a href="https://ofiwg.github.io/libfabric/">libfabric</a> for Slingshot-11, Ethernet, shared memory, and other networks.</p>
<p><a href="https://uiuc-hpc.github.io/lci/">API documentation</a></p>
<h1>Installation</h1>
<h2>CMake</h2>
<div class="fragment"><div class="line">git clone git@github.com:uiuc-hpc/lci.git</div>
<div class="line">cd lci</div>
<div class="line">mkdir build</div>
<div class="line">cmake -DCMAKE_INSTALL_PREFIX=/path/to/install ..</div>
<div class="line">make</div>
<div class="line">make install</div>
</div><!-- fragment --><h3>Important CMake variables</h3>
<ul>
<li><code>LCI_DEBUG=[ON|OFF]</code>: Enable/disable the debug mode (more assertions and logs). The default value is <code>OFF</code>.</li>
<li><code>LCI_NETWORK_BACKENDS=[ibv|ofi]</code>: allow multiple values separated with comma. Hint to which network backend to use. If the backend indicated by this variable are found, LCI will just use it. Otherwise, LCI will use whatever are found with the priority <code>ibv</code> &gt; <code>ofi</code>. The default value is <code>ibv,ofi</code>. Typically, you don't need to modify this variable as if <code>libibverbs</code> presents, it is likely to be the recommended one to use.<ul>
<li><code>ibv</code>: <a href="https://github.com/linux-rdma/rdma-core/blob/master/Documentation/libibverbs.md">libibverbs</a>, typically for infiniband/RoCE.</li>
<li><code>ofi</code>: <a href="https://ofiwg.github.io/libfabric/">libfabric</a>, for all other networks (slingshot-11, ethernet, shared memory).</li>
</ul>
</li>
</ul>
<h2>Spack</h2>
<p>LCI can be installed using <a href="https://spack.io/">Spack</a>. </p><div class="fragment"><div class="line">git clone git@github.com:uiuc-hpc/lci.git --branch=lci2</div>
<div class="line">spack repo add lci/contrib/spack</div>
<div class="line">spack install lci</div>
</div><!-- fragment --><h1>Run LCI applications</h1>
<p>We use the same mechanisms as MPI to launch LCI processes, so you can use the same way you run MPI applications to run LCI applications. Typically, it would be <code>mpirun</code> or <code>srun</code>. For example, </p><div class="fragment"><div class="line">mpirun -n 2 ./hello_world</div>
</div><!-- fragment --><p> or </p><div class="fragment"><div class="line">srun -n 2 ./hello_world</div>
</div><!-- fragment --><p>In addition, you can use the <code>lcrun</code> script </p><div class="fragment"><div class="line">lcrun -n 2 ./hello_world</div>
</div><!-- fragment --><p>We do not expect <code>lcrun</code> to have the same level of scalability as <code>mpirun</code> or <code>srun</code>, but it is a good tool for fast testing and debugging.</p>
<h1>Write an LCI program</h1>
<p>Read <a href="https://arxiv.org/abs/2503.15400">this short paper</a> to understand the high-level interface design of LCI.</p>
<p>See <code>examples</code> and <code>tests</code> for some example code.</p>
<p>Check out the <a href="https://uiuc-hpc.github.io/lci/">API documentation</a> for more details.</p>
<h1>LICENSE</h1>
<p>See LICENSE file.</p>
<h1>Authors</h1>
<ul>
<li>@danghvu (<a href="#" onclick="location.href='mai'+'lto:'+'dan'+'gh'+'vu@'+'gm'+'ail'+'.c'+'om'; return false;">dangh<span class="obfuscator">.nosp@m.</span>vu@g<span class="obfuscator">.nosp@m.</span>mail.<span class="obfuscator">.nosp@m.</span>com</a>)</li>
<li>@omor1</li>
<li>@JiakunYan (<a href="#" onclick="location.href='mai'+'lto:'+'jia'+'ku'+'nya'+'n1'+'998'+'@g'+'mai'+'l.'+'com'; return false;">jiaku<span class="obfuscator">.nosp@m.</span>nyan<span class="obfuscator">.nosp@m.</span>1998@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a>)</li>
<li>@snirmarc</li>
</ul>
<h1>Relevant Publications</h1>
<ul>
<li>Yan, Jiakun, and Marc Snir. "Contemplating a Lightweight Communication Interface for Asynchronous Many-Task Systems." arXiv preprint arXiv:2503.15400 (2025). <em>A short workshop paper describing the high-level interface design of LCI (version 2, the current version).</em></li>
<li>Yan, Jiakun, Hartmut Kaiser, and Marc Snir. "Understanding the Communication Needs of Asynchronous Many-Task Systems
--A Case Study of HPX+ LCI." arXiv preprint arXiv:2503.12774 (2025). <em>Paper about integrating LCI (version 1) into HPX.</em></li>
<li>Mor, Omri, George Bosilca, and Marc Snir. "Improving the scaling of an asynchronous many-task runtime with 
a lightweight communication engine." Proceedings of the 52nd International Conference on Parallel Processing. 2023. <em>Paper about integrating LCI (version 1) into PaRSEC.</em></li>
</ul>
<h1>Frequently Asked Questions</h1>
<h2>Bootstrapping</h2>
<h3>Why was my LCI application launched as a collection of processes all with rank 0?</h3>
<p>LCI was not bootstrapped correctly by <code>srun</code> or <code>mpirun</code>. LCI primarily relies on the Process-Management Interface (PMI) to bootstrap, the same way as MPI. LCI supports PMI1, PMI2, and PMIx. The LCI source code is shipped with a copy of the SLURM PMI1 and PMI2 client implementation, so users can normally use LCI on SLURM without any extra configuration. However, if <code>srun</code> does not enable PMI by default, or enables PMIx, or you use <code>mpirun</code>, additional configuration might be needed.</p>
<p>If you are using <code>srun</code>, you can explicitly enable PMI1 or PMI2 by using the <code>--mpi</code> option. </p><div class="fragment"><div class="line">srun --mpi=pmi2 -n 2 ./hello_world</div>
</div><!-- fragment --><p>If you are using <code>mpirun</code>, you need to find the corresponding PMI client library and link LCI to it. </p><div class="fragment"><div class="line"># Find the PMI client library</div>
<div class="line">ldd $(which mpirun)</div>
</div><!-- fragment --><p>Normally, MPICH uses <code>hydra-pmi</code>; Cray-MPICH uses <code>cray-pmi</code>; OpenMPI uses <code>pmix</code>. After finding the PMI client library, you can reconfigure LCI with the corresponding PMI client library through the <code>PMI_ROOT</code>, <code>PMI2_ROOT</code>, or <code>PMIx_ROOT</code> environment/cmake variables.</p>
<p>As a last resort, you can also set -DLCT_PMI_BACKEND_ENABLE_MPI=ON and link LCI to MPI. In this case, LCI will just use MPI to bootstrap. Performance might be slightly impacted as LCI and MPI can contend for network resources, but the impact should be insignificant.</p>
<p>You can use <code>export LCT_LOG_LEVEL=info</code> to monitor what bootstrap backend LCI is actually using and use <code>export LCT_PMI_BACKEND=[pmi1|pmi2|pmix|mpi]</code> to change the default behavior.</p>
<h3>Why does <code>lcrun</code> not work?</h3>
<p><code>lcrun</code> relies on another simple bootstrapping backend <code>file</code> which relies on the shared file system and <code>flock</code> to work.</p>
<p>It is possible that a previous failed run of <code>lcrun</code> did not clean up the temporary files it created. You can </p><div class="fragment"><div class="line">rm -r ~/.tmp/lct_pmi_file-*</div>
</div><!-- fragment --><p> then try again.</p>
<h2>Others</h2>
<h3>What is LCT?</h3>
<p>The Lightweight Communication Tools (LCT) library provides basic services such as bootstrapping and logging for LCI. It is a C++ library that can be used without LCI. You can build LCT without LCI by setting <code>LCI_WITH_LCT_ONLY=ON</code> (cmake variable). </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
